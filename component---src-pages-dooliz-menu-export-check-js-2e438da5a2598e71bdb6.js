(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"014J":function(e,t,a){e.exports={error:"dooliz-menu-export-check-module--error--Da3zU",success:"dooliz-menu-export-check-module--success--5sBJF",item_type:"dooliz-menu-export-check-module--item_type--2OcP-",item_name:"dooliz-menu-export-check-module--item_name--2Gq5n"}},Dg4a:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),c=a("Bl7J"),i=a("vrFN"),m=a("014J"),u=a.n(m),l=function(e){var t=e.name,a=e.value,n=e.setValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:t},"JSON ",t),r.a.createElement("br",null),r.a.createElement("textarea",{id:t,placeholder:t,value:a,onChange:function(e){n(e.target.value)}}))},s=function(e){var t=e.setValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"file",onChange:function(e){if(e.target.files[0]){var a=new FileReader;a.onload=function(){var e=a.result;t(e)},a.readAsText(e.target.files[0])}else t(null)}}))};t.default=function(){var e=Object(n.useState)(""),t=e[0],a=e[1],m=Object(n.useState)(null),o=m[0],p=m[1],d=Object(n.useState)(null),E=d[0],_=d[1];return r.a.createElement(c.a,null,r.a.createElement(i.a,{title:"dooliz-menu-export-check"}),r.a.createElement("h2",null,"dooliz-menu-export-check"),r.a.createElement("div",null,r.a.createElement(l,{name:"menu",value:t,setValue:a}),r.a.createElement("br",null),"OR",r.a.createElement("br",null),r.a.createElement(s,{setValue:p})),r.a.createElement("br",null),r.a.createElement("button",{type:"button",onClick:function(){var e=t||o;if(e)try{_(function(e){var t=JSON.parse(e),a=[],n={},r={},c={},i={},m={},u={};return t.menus.forEach((function(e){e.backend_name in n?a.push({type:"DUPLICATE",item_type:"menu",id:e.backend_name}):n[e.backend_name]=e})),t.categories.forEach((function(e){e.backend_name in r?a.push({type:"DUPLICATE",item_type:"category",id:e.backend_name}):r[e.backend_name]=e})),t.products.forEach((function(e){e.backend_name in c?a.push({type:"DUPLICATE",item_type:"product",id:e.backend_name}):c[e.backend_name]=e})),t.modifier_groups.forEach((function(e){e.backend_name in i?a.push({type:"DUPLICATE",item_type:"modifier_group",id:e.backend_name}):i[e.backend_name]=e})),t.modifiers.forEach((function(e){e.backend_name in m?a.push({type:"DUPLICATE",item_type:"modifier",id:e.backend_name}):m[e.backend_name]=e})),Object.keys(n).forEach((function(e){n[e].categories.forEach((function(e){e in r?r[e].used=!0:a.push({type:"MISSING",item_type:"category",id:e})}))})),Object.keys(r).forEach((function(e){r[e].products.forEach((function(e){e in c?c[e].used=!0:a.push({type:"MISSING",item_type:"product",id:e})}))})),Object.keys(c).forEach((function(e){var t=c[e];if(t.modifier_groups=t.modifier_groups||[],t.modifier_groups.forEach((function(e){e in i?i[e].used=!0:a.push({type:"MISSING",item_type:"modifier_group",id:e})})),"plu"in t&&t.plu){var n={item_type:"product",item:t};t.plu in u?u[t.plu].push(n):u[t.plu]=[n]}else a.push({type:"EMPTY_PLU",item_type:"product",id:e})})),Object.keys(i).forEach((function(e){i[e].modifiers.forEach((function(e){e in m?m[e].used=!0:a.push({type:"MISSING",item_type:"modifier",id:e})}))})),Object.keys(m).forEach((function(e){var t=m[e];if("plu"in t&&t.plu){var n={item_type:"modifier",item:t};t.plu in u?u[t.plu].push(n):u[t.plu]=[n]}else a.push({type:"EMPTY_PLU",item_type:"modifier",id:e})})),Object.keys(u).forEach((function(e){var t=u[e];1!==t.length&&a.push({type:"DUPLICATE_PLU",records:t})})),Object.keys(r).forEach((function(e){var t=r[e];!0!==t.used&&a.push({type:"UNUSED_ITEM",item_type:"category",id:t.backend_name})})),Object.keys(c).forEach((function(e){var t=c[e];!0!==t.used&&a.push({type:"UNUSED_ITEM",item_type:"product",id:t.backend_name})})),Object.keys(i).forEach((function(e){var t=i[e];!0!==t.used&&a.push({type:"UNUSED_ITEM",item_type:"modifier_group",id:t.backend_name})})),Object.keys(m).forEach((function(e){var t=m[e];!0!==t.used&&a.push({type:"UNUSED_ITEM",item_type:"modifier",id:t.backend_name}),t.type&&!["boolean","size","quantity"].includes(t.type)&&a.push({type:"INVALID_MODIFIER_TYPE",id:t.backend_name,modifier_type:t.type})})),a}(e))}catch(a){alert(a)}else alert("missing input")}},"Detect errors"),r.a.createElement("br",null),E&&0===E.length&&r.a.createElement("div",{className:u.a.success},"No errors"),E&&E.length>0&&r.a.createElement("div",null,E.map((function(e){var t=e.type+e.id;switch(e.type){case"DUPLICATE":return r.a.createElement("div",{className:u.a.error,key:t},"Duplicate"," ",r.a.createElement("span",{className:u.a.item_type},e.item_type)," ","named"," ",r.a.createElement("span",{className:u.a.item_name},e.id));case"MISSING":return r.a.createElement("div",{className:u.a.error,key:t},"Missing"," ",r.a.createElement("span",{className:u.a.item_type},e.item_type)," ","named"," ",r.a.createElement("span",{className:u.a.item_name},e.id));case"EMPTY_PLU":return r.a.createElement("div",{className:u.a.error,key:t},"No PLU set for"," ",r.a.createElement("span",{className:u.a.item_type},e.item_type)," ","named"," ",r.a.createElement("span",{className:u.a.item_name},e.id));case"DUPLICATE_PLU":return r.a.createElement("div",{className:u.a.error,key:t},"Multiple items with the same plu"," ",r.a.createElement("span",{className:u.a.item_type},e.records[0].item.plu)," ","named"," ",r.a.createElement("ul",null,e.records.map((function(e){return r.a.createElement("li",{key:e.item.backend_name},r.a.createElement("span",{className:u.a.item_name},"(",e.item_type,")",e.item.backend_name))}))));case"UNUSED_ITEM":return r.a.createElement("div",{className:u.a.error,key:t},"Unused"," ",r.a.createElement("span",{className:u.a.item_type},e.item_type)," ","named"," ",r.a.createElement("span",{className:u.a.item_name},e.id));case"INVALID_MODIFIER_TYPE":return r.a.createElement("div",{className:u.a.error,key:t},"Invalid type"," ",r.a.createElement("span",{className:u.a.item_type},e.modifier_type)," ","for modifier named"," ",r.a.createElement("span",{className:u.a.item_name},e.id))}return null}))))}}}]);
//# sourceMappingURL=component---src-pages-dooliz-menu-export-check-js-2e438da5a2598e71bdb6.js.map