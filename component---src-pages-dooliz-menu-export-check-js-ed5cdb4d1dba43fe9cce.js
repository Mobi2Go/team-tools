(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"014J":function(e,t,a){e.exports={error:"dooliz-menu-export-check-module--error--Da3zU",item_type:"dooliz-menu-export-check-module--item_type--2OcP-",item_name:"dooliz-menu-export-check-module--item_name--2Gq5n"}},Dg4a:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),i=a("Bl7J"),c=a("vrFN"),m=a("014J"),l=a.n(m),u=function(e){var t=e.name,a=e.value,n=e.setValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:t},"JSON ",t),r.a.createElement("br",null),r.a.createElement("textarea",{id:t,placeholder:t,value:a,onChange:function(e){n(e.target.value)}}))},o=function(e){var t=e.setValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"file",onChange:function(e){if(e.target.files[0]){var a=new FileReader;a.onload=function(){var e=a.result;t(e)},a.readAsText(e.target.files[0])}else t(null)}}))};t.default=function(){var e=Object(n.useState)(""),t=e[0],a=e[1],m=Object(n.useState)(null),p=m[0],s=m[1],d=Object(n.useState)(null),f=d[0],E=d[1];return r.a.createElement(i.a,null,r.a.createElement(c.a,{title:"dooliz-menu-export-check"}),r.a.createElement("h2",null,"dooliz-menu-export-check"),r.a.createElement("div",null,r.a.createElement(u,{name:"menu",value:t,setValue:a}),r.a.createElement("br",null),"OR",r.a.createElement("br",null),r.a.createElement(o,{setValue:s})),r.a.createElement("br",null),r.a.createElement("button",{type:"button",onClick:function(){var e=t||p;if(e)try{E(function(e){var t=JSON.parse(e),a=[],n={},r={},i={},c={},m={},l={};return t.menus.forEach((function(e){e.backend_name in n?a.push({type:"DUPLICATE",item_type:"menu",id:e.backend_name}):n[e.backend_name]=e})),t.categories.forEach((function(e){e.backend_name in r?a.push({type:"DUPLICATE",item_type:"category",id:e.backend_name}):r[e.backend_name]=e})),t.products.forEach((function(e){e.backend_name in i?a.push({type:"DUPLICATE",item_type:"product",id:e.backend_name}):i[e.backend_name]=e})),t.modifier_groups.forEach((function(e){e.backend_name in c?a.push({type:"DUPLICATE",item_type:"modifier_group",id:e.backend_name}):c[e.backend_name]=e})),t.modifiers.forEach((function(e){e.backend_name in m?a.push({type:"DUPLICATE",item_type:"modifier",id:e.backend_name}):m[e.backend_name]=e})),Object.keys(n).forEach((function(e){n[e].categories.forEach((function(e){e in r||a.push({type:"MISSING",item_type:"category",id:e})}))})),Object.keys(r).forEach((function(e){r[e].products.forEach((function(e){e in i||a.push({type:"MISSING",item_type:"product",id:e})}))})),Object.keys(i).forEach((function(e){var t=i[e];if(t.modifier_groups=t.modifier_groups||[],t.modifier_groups.forEach((function(e){e in c||a.push({type:"MISSING",item_type:"modifier_group",id:e})})),"plu"in t&&t.plu){var n={item_type:"product",item:t};t.plu in l?l[t.plu].push(n):l[t.plu]=[n]}else a.push({type:"EMPTY_PLU",item_type:"product",id:e})})),Object.keys(c).forEach((function(e){c[e].modifiers.forEach((function(e){e in m||a.push({type:"MISSING",item_type:"modifier",id:e})}))})),Object.keys(m).forEach((function(e){var t=m[e];if("plu"in t&&t.plu){var n={item_type:"modifier",item:t};t.plu in l?l[t.plu].push(n):l[t.plu]=[n]}else a.push({type:"EMPTY_PLU",item_type:"modifier",id:e})})),Object.keys(l).forEach((function(e){var t=l[e];1!==t.length&&a.push({type:"DUPLICATE_PLU",records:t})})),a}(e))}catch(a){alert(a)}else alert("missing input")}},"Detect errors"),r.a.createElement("br",null),f&&f.length>0&&r.a.createElement("div",null,f.map((function(e){switch(e.type){case"DUPLICATE":return r.a.createElement("div",{className:l.a.error},"Duplicate"," ",r.a.createElement("span",{className:l.a.item_type},e.item_type)," ","named"," ",r.a.createElement("span",{className:l.a.item_name},e.id));case"MISSING":return r.a.createElement("div",{className:l.a.error},"Missing"," ",r.a.createElement("span",{className:l.a.item_type},e.item_type)," ","named"," ",r.a.createElement("span",{className:l.a.item_name},e.id));case"EMPTY_PLU":return r.a.createElement("div",{className:l.a.error},"No PLU set for"," ",r.a.createElement("span",{className:l.a.item_type},e.item_type)," ","named"," ",r.a.createElement("span",{className:l.a.item_name},e.id));case"DUPLICATE_PLU":return r.a.createElement("div",{className:l.a.error},"Multiple items with the same plu"," ",r.a.createElement("span",{className:l.a.item_type},e.records[0].item.plu)," ","named"," ",r.a.createElement("ul",null,e.records.map((function(e){return r.a.createElement("li",{key:e.item.backend_name},r.a.createElement("span",{className:l.a.item_name},"(",e.item_type,")",e.item.backend_name))}))))}return null}))))}}}]);
//# sourceMappingURL=component---src-pages-dooliz-menu-export-check-js-ed5cdb4d1dba43fe9cce.js.map